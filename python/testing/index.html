<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Team <teamname>">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>GIVEN-WHEN-THEN - Development manual</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "GIVEN-WHEN-THEN";
    var mkdocs_page_input_path = "python/testing/index.md";
    var mkdocs_page_url = "/development/python/testing/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Development manual</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../tools/">What are the commonly used tools?</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Choose a development workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../dev/models/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/githubflow/">github flow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/gitflow/">git flow</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">How do confine my project?</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../conda/conda_conventions/">How to name your conda env</a>
                </li>
                <li class="">
                    
    <a class="" href="../../conda/activate/">How do I activate an env?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../perl/installation/perlbrew/">How do I manage perl and cpanm?</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../editors/">Choose your editor :)</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">How do we use Python?</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../conventions/">conventions</a>
                </li>
                <li class="">
                    
    <a class="" href="../variables/">variables</a>
                </li>
                <li class="">
                    
    <a class="" href="../logging/">logging</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">How to write unit tests?</span>
    <ul class="subnav">
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">GIVEN-WHEN-THEN</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#python-testing">Python testing</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#motivation">Motivation</a></li>
        
            <li><a class="toctree-l5" href="#the-habit-loop">The habit loop</a></li>
        
            <li><a class="toctree-l5" href="#strategy-given-when-then">Strategy: GIVEN-WHEN-THEN</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="fixtures/">Are you using fixtures?</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../dev/integration/">How to integrate two tools?</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">How to publish your tool?</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../publish/prod/">How to publish your tool?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../publish/crontab/">How to automate running your tool?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../publish/update-scripts/">How make updating your tool easy?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../publish/sign-off/">Who can sign off on tests, reviews and deploys?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../publish/servers/">How to update configuration?</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">How do we use github?</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../github/pr/">How to make a pull request?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../github/pr-request/">How to request a pull request review?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../github/pr-etiquette/">Pull request etiquette</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/project/">Checklist for a github repository</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Other recommendations?</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../perl/">What if I need perl?</a>
                </li>
                <li class="">
                    
    <a class="" href="../../perl/best_practises/best_practises/">What are perl's best practices?</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../mkdocs/">How do I publish this manual?</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Development manual</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>How to write unit tests? &raquo;</li>
        
      
        
          <li>How do we use Python? &raquo;</li>
        
      
    
    <li>GIVEN-WHEN-THEN</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/Clinical-Genomics/development/edit/master/docs/python/testing/index.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="python-testing">Python testing</h1>
<p>In general we use <a href="http://docs.pytest.org/en/latest/">pytest</a> for testing Python code. You might ask why! Well, this is why: <a href="https://testandcode.com/">testandcode</a></p>
<h2 id="motivation">Motivation</h2>
<p>Reasons to test code are plentiful; performance, quality, usability, security, and stability. However, the focus will be on testing to ensure <em>expected behavior</em>.</p>
<p>The main idea is that your suite of tests should insprire confidence that the code performs as expected. Any additional updates should pass all tests before being considered in the main branch. This way, developer who contribtute to the project don‚Äôt fear breaking something üêû.</p>
<p>One more thing: when you write tests for your code, you write code which is easy to test. The result is functional, maintainable, and composable!</p>
<h2 id="the-habit-loop">The habit loop</h2>
<p>A habit is formed when you no longer need to motivate yourself to perform a routine. You do it automatically. Following a cue, acting out your routine, and claiming your reward.</p>
<p>It‚Äôs only natural to feel like tests are but an additional step that you would rather skip and just deploy! But without tests you will never feel confident about the execution of your code. Just like working out, writing tests is a perfect activity to design a habit around.</p>
<p>This is my own habit loop for testing: my cue is writing or altering a function. The routine is writing tests for it. My reward is better/complete <a href="https://en.wikipedia.org/wiki/Code_coverage">test coverage</a>. I now crave to maintain a green badge of 100% coverage and peace of mind that executing my code does what I expect.</p>
<p>It‚Äôs important to make this loop as simple as possible. That‚Äôs why you should invest time in learning and setting up test automation.</p>
<blockquote>
<p>Read more about habits and how to master them in <a href="http://charlesduhigg.com/the-power-of-habit/">The Power of Habit</a>, by Charles Duhigg.</p>
</blockquote>
<h2 id="strategy-given-when-then">Strategy: GIVEN-WHEN-THEN</h2>
<p>It can be difficult to get started writing tests. Where do I begin? My routine is to follow step-by-step instructions in a very simple model: GIVEN-WHEN-THEN.</p>
<ul>
<li><strong>GIVEN</strong>: describe the prerequisites for the test you will run and optionally make assertions about your setup</li>
<li><strong>WHEN</strong>: run your function and explain what is supposed to happen</li>
<li><strong>THEN</strong>: assert the outcome of your test; return values or side effects</li>
</ul>
<p>Here‚Äôs a quick example:</p>
<pre><code># GIVEN the database doesn't contain any rows
assert DatabaseRow.query.count() == 0
# WHEN adding a new row to the database
new_name = 'Paul'
add_row(name=new_name, age=12)
# THEN there should be ONE new row added to the database
assert DatabaseRow.query.count() == 1
# ... with the expected name
assert DatabaseRow.query.first().name == new_name
</code></pre>

<p>By being explicit about what you're testing, you can get past the initial mental obstacles. It also adds relevancy to writing tests. Without clear comments it can often feel like indecipherable lines that does something you‚Äôve long forgot.</p>
<p>This tutorial was originally written by our favorite alumni: <a href="https://www.robinandeer.com/blog/2016/06/18/how-i-test-my-code-part-1/">Robin Andeer</a>!</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fixtures/" class="btn btn-neutral float-right" title="Are you using fixtures?">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../logging/" class="btn btn-neutral" title="logging"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Clinical-Genomics/development/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../logging/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="fixtures/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
